var buttonWidth,rrsiInit=function(){var e=$(".rrsi-buttons li").length,t=100/e;$(".rrsi-buttons li").css("width",t+"%").attr("data-initwidth",t);$(".rrsi-buttons li .text").each(function(){var e=$(this).width();$(this).closest("li").attr("data-size",e)})},rrsiMagicLayout=function(){var e,t,n,r,i;buttonWidth=$(".rrsi-buttons li").not(".small").first().width();buttonWidth>160?$(".rrsi-buttons").addClass("large-format"):buttonWidth<=160&&$(".rrsi-buttons").removeClass("large-format");$(".rrsi-buttons li").each(function(e,t){var n=parseFloat($(this).width())-40,r=parseFloat($(this).attr("data-size"));if(r>=n)$(this).addClass("small").css("width","36px");else{console.log("should be removing small");$(this).removeClass("small").css("width",$(this).attr("data-initwidth")+"%")}});r=$(".rrsi-buttons li.small").length;console.log("number of small buttons: "+r);n=r*36;console.log("subtract small pixels: "+n);e=$(".rrsi-buttons li").not(".small").length;regPercent=100/e;i=n/e;magicWidth="-webkit-calc("+regPercent+"% - "+i+"px)";console.log(magicWidth);$(".rrsi-buttons li").not(".small").css("width",magicWidth);console.log("small button fraction: "+i)},waitForFinalEvent=function(){var e={};return function(t,n,r){r||(r="Don't call this twice without a uniqueId");e[r]&&clearTimeout(e[r]);e[r]=setTimeout(t,n)}}();$(window).resize(function(){waitForFinalEvent(function(){rrsiMagicLayout()},500,"button watcher")});$(document).ready(function(){rrsiInit();rrsiMagicLayout()});