+function(t,e,s){"use strict";var r={calc:!1},n=function(){var t=e("<div>"),s=["calc","-webkit-calc","-moz-calc"];e("body").append(t);for(var n=0;n<s.length;n++)if(t.css("width",s[n]+"(1px)"),1===t.width()){r.calc=s[n];break}t.remove()},a=function(){e(".rrssb-buttons").each(function(t){var s=e(this),r=e("li:visible",s),n=r.length,a=100/n;r.css("width",a+"%").attr("data-initwidth",a)})},o=function(){e(".rrssb-buttons").each(function(t){var s=e(this),r=s.width(),n=e("li",s).not(".small").first().width();n>170&&e("li.small",s).length<1?s.addClass("large-format"):s.removeClass("large-format"),200>r?s.removeClass("small-format").addClass("tiny-format"):s.removeClass("tiny-format")})},i=function(){e(".rrssb-buttons").each(function(t){var s=e(this),r=e("li",s),n=r.filter(".small"),a=0,o=0,i=n.first(),l=parseFloat(i.attr("data-size"))+55,h=n.length;if(h===r.length){var u=42*h,f=s.width();f>u+l&&(s.removeClass("small-format"),n.first().removeClass("small"),c())}else{r.not(".small").each(function(t){var s=e(this),r=parseFloat(s.attr("data-size"))+55,n=parseFloat(s.width());a+=n,o+=r});var m=a-o;m>l&&(i.removeClass("small"),c())}})},l=function(t){e(".rrssb-buttons").each(function(t){var s=e(this),r=e("li",s);e(r.get().reverse()).each(function(t,s){var n=e(this);if(n.hasClass("small")===!1){var a=parseFloat(n.attr("data-size"))+55,o=parseFloat(n.width());if(a>o){var l=r.not(".small").last();e(l).addClass("small"),c()}}--s||i()})}),t===!0&&u(c)},c=function(){e(".rrssb-buttons").each(function(t){var s,n,o,i,l,c=e(this),h=e("li",c),u=h.filter(".small"),f=u.length;f>0&&f!==h.length?(c.removeClass("small-format"),u.css("width","42px"),o=42*f,s=h.not(".small").length,n=100/s,l=o/s,r.calc===!1?(i=(c.innerWidth()-1)/s-l,i=Math.floor(1e3*i)/1e3,i+="px"):i=r.calc+"("+n+"% - "+l+"px)",h.not(".small").css("width",i)):f===h.length?(c.addClass("small-format"),a()):(c.removeClass("small-format"),a())}),o()},h=function(){e(".rrssb-buttons").each(function(t){e(this).addClass("rrssb-"+(t+1))}),d(),n(),a(),e(".rrssb-buttons li .rrssb-text").each(function(t){var s=e(this),r=s.width();s.closest("li").attr("data-size",r)}),l(!0)},u=function(t){e(".rrssb-buttons li.small").removeClass("small"),l(),t()},f=function(e,r,n,a){var o=t.screenLeft!==s?t.screenLeft:screen.left,i=t.screenTop!==s?t.screenTop:screen.top,l=t.innerWidth?t.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,c=t.innerHeight?t.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,h=l/2-n/2+o,u=c/3-a/3+i,f=t.open(e,r,"scrollbars=yes, width="+n+", height="+a+", top="+u+", left="+h);t.focus&&f.focus()},m=function(){var t={};return function(e,s,r){r||(r="Don't call this twice without a uniqueId"),t[r]&&clearTimeout(t[r]),t[r]=setTimeout(e,s)}}(),d=function(){var s={},r=[];e(".rrssb-buttons li").each(function(){var t=e(this),s=t.prop("class"),n=s.replace("rrssb-","");r.push(n)});var n=[];for(var a in r)-1===n.indexOf(r[a])&&n.push(r[a]);-1!==n.indexOf("facebook")&&e.ajax({url:"http://graph.facebook.com/?id="+t.location.href,success:function(t){s.facebook=t.shares},error:function(){console.error("There was an error getting data from Facebook, counts may be incorrect.")}}),-1!==n.indexOf("twitter")&&e.ajax({url:"http://cdn.api.twitter.com/1/urls/count.json?url="+t.location.href,success:function(t){console.log(t),s.twitter=t.count,console.log(s)},error:function(){console.error("There was an error getting data from Twitter, counts may be incorrect.")}})};e(document).ready(function(){e(".rrssb-buttons a.popup").on("click",function(t){var s=e(this);f(s.attr("href"),s.find(".rrssb-text").html(),580,470),t.preventDefault()}),e(t).resize(function(){u(c),m(function(){u(c)},200,"finished resizing")}),h()}),t.rrssbInit=h}(window,jQuery);