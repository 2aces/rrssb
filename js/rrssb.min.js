/*
 Ridiculously Responsive Social Sharing Buttons
 Team: @dbox, @joshuatuscan
 Site: http://www.kurtnoble.com/labs/rrssb
 Twitter: @therealkni

        ___           ___
       /__/|         /__/\        ___
      |  |:|         \  \:\      /  /\
      |  |:|          \  \:\    /  /:/
    __|  |:|      _____\__\:\  /__/::\
   /__/\_|:|____ /__/::::::::\ \__\/\:\__
   \  \:\/:::::/ \  \:\~~\~~\/    \  \:\/\
    \  \::/~~~~   \  \:\  ~~~      \__\::/
     \  \:\        \  \:\          /__/:/
      \  \:\        \  \:\         \__\/
       \__\/         \__\/
*/+function(window,jQuery,undefined){"use strict";var support={calc:false};var detectCalcSupport=function(){var el=$("<div>");var calcProps=["calc","-webkit-calc","-moz-calc"];$("body").append(el);for(var i=0;i<calcProps.length;i++){el.css("width",calcProps[i]+"(1px)");if(el.width()===1){support.calc=calcProps[i];break}}el.remove()};var setPercentBtns=function(){jQuery(".rrssb-buttons").each(function(index){var self=jQuery(this);var buttons=jQuery("li:visible",self);var numOfButtons=buttons.length;var initBtnWidth=100/numOfButtons;buttons.css("width",initBtnWidth+"%").attr("data-initwidth",initBtnWidth)})};var makeExtremityBtns=function(){jQuery(".rrssb-buttons").each(function(index){var self=jQuery(this);var containerWidth=self.width();var buttonWidth=jQuery("li",self).not(".small").first().width();if(buttonWidth>170&&jQuery("li.small",self).length<1){self.addClass("large-format")}else{self.removeClass("large-format")}if(containerWidth<200){self.removeClass("small-format").addClass("tiny-format")}else{self.removeClass("tiny-format")}})};var backUpFromSmall=function(){jQuery(".rrssb-buttons").each(function(index){var self=jQuery(this);var buttons=jQuery("li",self);var smallButtons=buttons.filter(".small");var totalBtnSze=0;var totalTxtSze=0;var upCandidate=smallButtons.first();var nextBackUp=parseFloat(upCandidate.attr("data-size"))+55;var smallBtnCount=smallButtons.length;if(smallBtnCount===buttons.length){var btnCalc=smallBtnCount*42;var containerWidth=self.width();if(btnCalc+nextBackUp<containerWidth){self.removeClass("small-format");smallButtons.first().removeClass("small");sizeSmallBtns()}}else{buttons.not(".small").each(function(index){var button=jQuery(this);var txtWidth=parseFloat(button.attr("data-size"))+55;var btnWidth=parseFloat(button.width());totalBtnSze=totalBtnSze+btnWidth;totalTxtSze=totalTxtSze+txtWidth});var spaceLeft=totalBtnSze-totalTxtSze;if(nextBackUp<spaceLeft){upCandidate.removeClass("small");sizeSmallBtns()}}})};var checkSize=function(init){jQuery(".rrssb-buttons").each(function(index){var self=jQuery(this);var buttons=jQuery("li",self);var elems=buttons.nextAll();var count=elems.length;jQuery(buttons.get().reverse()).each(function(index,count){var button=jQuery(this);if(button.hasClass("small")===false){var txtWidth=parseFloat(button.attr("data-size"))+55;var btnWidth=parseFloat(button.width());if(txtWidth>btnWidth){var btn2small=buttons.not(".small").last();jQuery(btn2small).addClass("small");sizeSmallBtns()}}if(!--count)backUpFromSmall()})});if(init===true){rrssbMagicLayout(sizeSmallBtns)}};var sizeSmallBtns=function(){jQuery(".rrssb-buttons").each(function(index){var self=jQuery(this);var regButtonCount;var regPercent;var pixelsOff;var magicWidth;var smallBtnFraction;var buttons=jQuery("li",self);var smallButtons=buttons.filter(".small");var smallBtnCount=smallButtons.length;if(smallBtnCount>0&&smallBtnCount!==buttons.length){self.removeClass("small-format");smallButtons.css("width","42px");pixelsOff=smallBtnCount*42;regButtonCount=buttons.not(".small").length;regPercent=100/regButtonCount;smallBtnFraction=pixelsOff/regButtonCount;if(support.calc===false){magicWidth=self.innerWidth()/regButtonCount-smallBtnFraction;magicWidth=Math.floor(magicWidth*1e3)/1e3;magicWidth+="px"}else{magicWidth=support.calc+"("+regPercent+"% - "+smallBtnFraction+"px)"}buttons.not(".small").css("width",magicWidth)}else if(smallBtnCount===buttons.length){self.addClass("small-format");setPercentBtns()}else{self.removeClass("small-format");setPercentBtns()}});makeExtremityBtns()};var rrssbInit=function(){jQuery(".rrssb-buttons").each(function(index){jQuery(this).addClass("rrssb-"+(index+1))});detectCalcSupport();setPercentBtns();jQuery(".rrssb-buttons li .rrssb-text").each(function(index){var buttonTxt=jQuery(this);var txtWdth=buttonTxt.width();buttonTxt.closest("li").attr("data-size",txtWdth)});checkSize(true)};var rrssbMagicLayout=function(callback){jQuery(".rrssb-buttons li.small").removeClass("small");checkSize();callback()};var popupCenter=function(url,title,w,h){var dualScreenLeft=window.screenLeft!==undefined?window.screenLeft:screen.left;var dualScreenTop=window.screenTop!==undefined?window.screenTop:screen.top;var width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width;var height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var left=width/2-w/2+dualScreenLeft;var top=height/3-h/3+dualScreenTop;var newWindow=window.open(url,title,"scrollbars=yes, width="+w+", height="+h+", top="+top+", left="+left);if(window.focus){newWindow.focus()}};var waitForFinalEvent=function(){var timers={};return function(callback,ms,uniqueId){if(!uniqueId){uniqueId="Don't call this twice without a uniqueId"}if(timers[uniqueId]){clearTimeout(timers[uniqueId])}timers[uniqueId]=setTimeout(callback,ms)}}();jQuery(document).ready(function(){jQuery(".rrssb-buttons a.popup").on("click",function(e){var self=jQuery(this);popupCenter(self.attr("href"),self.find(".rrssb-text").html(),580,470);e.preventDefault()});jQuery(window).resize(function(){rrssbMagicLayout(sizeSmallBtns);waitForFinalEvent(function(){rrssbMagicLayout(sizeSmallBtns)},200,"finished resizing")});rrssbInit()});window.rrssbInit=rrssbInit}(window,jQuery);